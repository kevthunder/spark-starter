(function(){var o,t,n,e,i,r,s,a,u,p,c,l=[].slice,h=function(t,n){for(var e in n)d.call(n,e)&&(t[e]=n[e]);function i(){this.constructor=t}return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},d={}.hasOwnProperty,f=[].indexOf||function(t){for(var n=0,e=this.length;n<e;n++)if(n in this&&this[n]===t)return n;return-1};o="undefined"!=typeof module&&null!==module?module.exports={}:(null==this.Spark&&(this.Spark={}),this.Spark),t=function(){return function(){function t(t,n){this.target=t,this.callback=n,this.binded=!1}return t.prototype.bind=function(){return this.binded||null==this.callback||null==this.target||this.doBind(),this.binded=!0},t.prototype.doBind=function(){throw new Error("Not implemented")},t.prototype.unbind=function(){return this.binded&&null!=this.callback&&null!=this.target&&this.doUnbind(),this.binded=!1},t.prototype.doUnbind=function(){throw new Error("Not implemented")},t.prototype.equals=function(t){return t.constructor===this.constructor&&t.target===this.target&&this.compareCallback(t.callback)},t.prototype.compareCallback=function(e){return e===this.callback||null!=e.maker&&e.maker===this.callback.maker&&e.uses.length===this.callback.uses.length&&this.callback.uses.every(function(t,n){return t===e.uses[n]})},t}()},o.Binder=t(),o.Binder.definition=t,n=function(){var t;return t=function(){function t(t){null!=t?"function"==typeof t.toArray?this._array=t.toArray():Array.isArray(t)?this._array=t:this._array=[t]:this._array=[]}return t.prototype.changed=function(){},t.prototype.get=function(t){return this._array[t]},t.prototype.set=function(t,n){var e;return this._array[t]!==n&&(e=this.toArray(),this._array[t]=n,this.changed(e)),n},t.prototype.add=function(t){if(!this._array.includes(t))return this.push(t)},t.prototype.remove=function(t){var n,e;if(-1!==(n=this._array.indexOf(t)))return e=this.toArray(),this._array.splice(n,1),this.changed(e)},t.prototype.toArray=function(){return this._array.slice()},t.prototype.count=function(){return this._array.length},t.readFunctions=["every","find","findIndex","forEach","includes","indexOf","join","lastIndexOf","map","reduce","reduceRight","some","toString"],t.readListFunctions=["concat","filter","slice"],t.writefunctions=["pop","push","reverse","shift","sort","splice","unshift"],t.readFunctions.forEach(function(e){return t.prototype[e]=function(){var t,n;return t=1<=arguments.length?l.call(arguments,0):[],(n=this._array)[e].apply(n,t)}}),t.readListFunctions.forEach(function(e){return t.prototype[e]=function(){var t,n;return t=1<=arguments.length?l.call(arguments,0):[],this.copy((n=this._array)[e].apply(n,t))}}),t.writefunctions.forEach(function(r){return t.prototype[r]=function(){var t,n,e,i;return t=1<=arguments.length?l.call(arguments,0):[],n=this.toArray(),i=(e=this._array)[r].apply(e,t),this.changed(n),i}}),t.newSubClass=function(t,n){var e;return"object"==typeof t?(e=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return h(n,t),n}(this),Object.assign(e.prototype,t),new e(n)):new this(n)},t.prototype.copy=function(t){return null==t&&(t=this.toArray()),new this.constructor(t)},t.prototype.equals=function(e){return this.count()===(tyepeof("function"===e.count)?e.count():e.length)&&this.every(function(t,n){return e[n]===t})},t.prototype.getAddedFrom=function(n){return this._array.filter(function(t){return!n.includes(t)})},t.prototype.getRemovedFrom=function(t){return t.filter((n=this,function(t){return!n.includes(t)}));var n},t}(),Object.defineProperty(t.prototype,"length",{get:function(){return this.count()}}),("undefined"!=typeof Symbol&&null!==Symbol?Symbol.iterator:void 0)&&(t.prototype[Symbol.iterator]=function(){return this._array[Symbol.iterator]()}),t},o.Collection=n(),o.Collection.definition=n,e=function(t){var n;return null==t&&(t={}),n=t.hasOwnProperty("Binder")?t.Binder:o.Binder,function(t){function i(t,n,e){this.event=t,i.__super__.constructor.call(this,n,e)}return h(i,n),i.prototype.doBind=function(){if("function"==typeof this.target.addEventListener)return this.target.addEventListener(this.event,this.callback);if("function"==typeof this.target.addListener)return this.target.addListener(this.event,this.callback);if("function"==typeof this.target.on)return this.target.on(this.event,this.callback);throw new Error("No function to add event listeners was found")},i.prototype.doUnbind=function(){if("function"==typeof this.target.removeEventListener)return this.target.removeEventListener(this.event,this.callback);if("function"==typeof this.target.removeListener)return this.target.removeListener(this.event,this.callback);if("function"==typeof this.target.off)return this.target.off(this.event,this.callback);throw new Error("No function to remove event listeners was found")},i.prototype.equals=function(t){return i.__super__.equals.call(this,t)&&t.event===this.event},i.prototype.match=function(t,n){return t===this.event&&n===this.target},i.checkEmitter=function(t,n){if(null==n&&(n=!0),"function"==typeof t.addEventListener||"function"==typeof t.addListener||"function"==typeof t.on)return!0;if(n)throw new Error("No function to add event listeners was found");return!1},i}()},o.EventBind=e(),o.EventBind.definition=e,i=function(t){var i,e;return null==t&&(t={}),i=t.hasOwnProperty("EventBind")?t.EventBind:o.EventBind,e=function(t,n){var e,i;return-1<(i=t.findIndex(n))?(e=t[i],t.splice(i,1),e):null},function(){function t(t,n){var e;this.property=t,this.obj=null!=n?n:null,this.invalidationEvents=[],this.recycled=[],this.unknowns=[],this.strict=this.constructor.strict,this.invalidateCallback=(e=this,function(){return e.invalidate(),null})}return t.strict=!0,t.prototype.invalidate=function(){var t;return"function"==typeof this.property.invalidate?this.property.invalidate():(t="invalidate"+this.property.charAt(0).toUpperCase()+this.property.slice(1),"function"==typeof this.obj[t]?this.obj[t]():this.obj[this.property]=null)},t.prototype.unknown=function(){return"function"==typeof this.property.unknown?this.property.unknown():this.invalidate()},t.prototype.addEventBind=function(t,n,e){return this.addBinder(new i(t,n,e))},t.prototype.addBinder=function(n){if(null==n.callback&&(n.callback=this.invalidateCallback),!this.invalidationEvents.some(function(t){return t.equals(n)}))return this.invalidationEvents.push(e(this.recycled,function(t){return t.equals(n)})||n)},t.prototype.getUnknownCallback=function(n,e){var t,i;return i=this,(t=function(){if(!i.unknowns.some(function(t){return t.prop===n&&t.target===e}))return i.unknowns.push({prop:n,target:e}),i.unknown()}).maker=arguments.callee,t.uses=Array.from(arguments),t},t.prototype.event=function(t,n){if(null==n&&(n=this.obj),this.checkEmitter(n))return this.addEventBind(t,n)},t.prototype.value=function(t,n,e){return null==e&&(e=this.obj),this.event(n,e),t},t.prototype.prop=function(t,n){if(null==n&&(n=this.obj),"string"!=typeof t)throw new Error("Property name must be a string");return this.checkEmitter(n)?(this.addEventBind(t+"Invalidated",n,this.getUnknownCallback(t,n)),this.value(n[t],t+"Updated",n)):n[t]},t.prototype.propInitiated=function(t,n){var e;return null==n&&(n=this.obj),!(e=n.getPropertyInstance(t).initiated)&&this.checkEmitter(n)&&this.event(t+"Updated",n),e},t.prototype.validateUnknowns=function(t,n){var e;return null==n&&(n=this.obj),e=this.unknowns,this.unknowns=[],e.forEach(function(t){return t.target[t.prop]})},t.prototype.isEmpty=function(){return 0===this.invalidationEvents.length},t.prototype.bind=function(){return this.invalidationEvents.forEach(function(t){return t.bind()})},t.prototype.recycle=function(t){var n,e,i;return this.recycled=this.invalidationEvents,this.invalidationEvents=[],i=this,n=function(){return i.recycled.forEach(function(t){return t.unbind()}),i.recycled=[]},"function"==typeof t?1<t.length?t(this,n):(e=t(this),n(),e):n},t.prototype.checkEmitter=function(t){return i.checkEmitter(t,this.strict)},t.prototype.unbind=function(){return this.invalidationEvents.forEach(function(t){return t.unbind()})},t}()},o.Invalidator=i(),o.Invalidator.definition=i,r=function(t){var n;return null==t&&(t={}),n=t.hasOwnProperty("Invalidator")?t.Invalidator:o.Invalidator,function(){function t(t,n){this.property=t,this.obj=n,this.init()}return t.prototype.init=function(){return this.value=this.ingest(this.property.options.default),this.calculated=!1,this.initiated=void 0!==this.property.options.default,this.revalidateCallback=(t=this,function(){return t.get()});var t},t.prototype.get=function(){var t,n,e;return!1===this.property.options.get?void 0:"function"==typeof this.property.options.get?(e=this.callOptionFunct("get"),this.revalidated(),e):(this.invalidator&&this.invalidator.validateUnknowns(),this.isActive()?(this.calculated||(n=this.value,t=this.initiated,this.calcul(),this.value!==n&&(t?this.changed(n):"function"==typeof this.obj.emitEvent&&this.obj.emitEvent(this.property.getUpdateEventName(),[n]))),this.pendingChanges&&this.changed(this.pendingOld),this.output()):void(this.initiated=!0))},t.prototype.set=function(t){var n;return!1===this.property.options.set||("function"==typeof this.property.options.set?this.callOptionFunct("set",t):(t=this.ingest(t),this.revalidated(),this.value!==t&&(n=this.value,this.value=t,this.manual=!0,this.changed(n)))),this},t.prototype.invalidate=function(){return(this.calculated||!1===this.active)&&(this.calculated=!1,this._invalidateNotice()&&null!=this.invalidator&&this.invalidator.unbind()),this},t.prototype.unknown=function(){return(this.calculated||!1===this.active)&&this._invalidateNotice(),this},t.prototype._invalidateNotice=function(){return this.isImmediate()?(this.get(),!1):("function"==typeof this.obj.emitEvent&&this.obj.emitEvent(this.property.getInvalidateEventName()),null!=this.getUpdater()&&this.getUpdater().bind(),!0)},t.prototype.destroy=function(){if(null!=this.invalidator)return this.invalidator.unbind()},t.prototype.callOptionFunct=function(){var t,n,e;return n=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],"string"==typeof n&&(n=this.property.options[n]),"function"==typeof n.overrided&&t.push((e=this,function(){var t;return t=1<=arguments.length?l.call(arguments,0):[],e.callOptionFunct.apply(e,[n.overrided].concat(l.call(t)))})),n.apply(this.obj,t)},t.prototype.isActive=function(){var e;return"boolean"==typeof this.property.options.active?this.property.options.active:"function"!=typeof this.property.options.active||((this.activeInvalidator||new n(this,this.obj)).recycle((e=this,function(t,n){return e.active=e.callOptionFunct("active",t),n(),e.active||t.isEmpty()?(t.unbind(),e.activeInvalidator=null):(e.invalidator=t,(e.activeInvalidator=t).bind())})),this.active)},t.prototype.calcul=function(){var e;return"function"==typeof this.property.options.calcul&&(this.invalidator||(this.invalidator=new n(this,this.obj)),this.invalidator.recycle((e=this,function(t,n){return e.value=e.callOptionFunct("calcul",t),e.manual=!1,n(),t.isEmpty()?e.invalidator=null:t.bind()}))),this.revalidated(),this.value},t.prototype.revalidated=function(){if(this.calculated=!0,this.initiated=!0,null!=this.getUpdater())return this.getUpdater().unbind()},t.prototype.getUpdater=function(){return void 0===this.updater&&(null!=this.property.options.updater?(this.updater=this.property.options.updater,"function"==typeof this.updater.getBinder&&(this.updater=this.updater.getBinder()),"function"!=typeof this.updater.bind||"function"!=typeof this.updater.unbind?this.updater=null:this.updater.callback=this.revalidateCallback):this.updater=null),this.updater},t.prototype.ingest=function(t){return"function"==typeof this.property.options.ingest?this.callOptionFunct("ingest",t):t},t.prototype.output=function(){return"function"==typeof this.property.options.output?this.callOptionFunct("output",this.value):this.value},t.prototype.changed=function(t){return this.isActive()?(this.pendingChanges=!1,this.pendingOld=void 0,this.callChangedFunctions(t),"function"==typeof this.obj.emitEvent&&(this.obj.emitEvent(this.property.getUpdateEventName(),[t]),this.obj.emitEvent(this.property.getChangeEventName(),[t]))):(this.pendingChanges=!0,void 0===this.pendingOld&&(this.pendingOld=t)),this},t.prototype.callChangedFunctions=function(t){if("function"==typeof this.property.options.change)return this.callOptionFunct("change",t)},t.prototype.isImmediate=function(){return!1!==this.property.options.immediate&&(!0===this.property.options.immediate||("function"==typeof this.property.options.immediate?this.callOptionFunct("immediate"):null==this.getUpdater()&&("function"==typeof this.obj.getListeners&&0<this.obj.getListeners(this.property.getChangeEventName()).length||"function"==typeof this.property.options.change)))},t.bind=function(t,n){var e;return e=n.name.charAt(0).toUpperCase()+n.name.slice(1),Object.defineProperty(t,n.name,{configurable:!0,get:function(){return n.getInstance(this).get()},set:function(t){return n.getInstance(this).set(t)}}),t["get"+e]=function(){return n.getInstance(this).get()},t["set"+e]=function(t){return n.getInstance(this).set(t),this},t["invalidate"+e]=function(){return n.getInstance(this).invalidate(),this}},t}()},o.PropertyInstance=r(),o.PropertyInstance.definition=r,s=function(t){var i,e;return null==t&&(t={}),e=t.hasOwnProperty("PropertyInstance")?t.PropertyInstance:o.PropertyInstance,i=t.hasOwnProperty("Collection")?t.Collection:o.Collection,function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return h(n,e),n.prototype.ingest=function(t){return"function"==typeof this.property.options.ingest&&(t=this.callOptionFunct("ingest",t)),null==t?[]:"function"==typeof t.toArray?t.toArray():Array.isArray(t)?t.slice():[t]},n.prototype.output=function(){var t,n,e;return e=this.value,"function"==typeof this.property.options.output&&(e=this.callOptionFunct("output",this.value)),n=this,(t=i.newSubClass(this.property.options.collection,e)).changed=function(t){return n.changed(t)},t},n.prototype.callChangedFunctions=function(e){var i,r;return"function"==typeof this.property.options.itemAdded&&this.value.forEach((i=this,function(t,n){if(!e.includes(t))return i.callOptionFunct("itemAdded",t,n)})),"function"==typeof this.property.options.itemRemoved&&e.forEach((r=this,function(t,n){if(!r.value.includes(t))return r.callOptionFunct("itemRemoved",t,n)})),n.__super__.callChangedFunctions.call(this,e)},n}()},o.CollectionProperty=s(),o.CollectionProperty.definition=s,a=function(t){var e,n,r,i;return null==t&&(t={}),i=t.hasOwnProperty("PropertyInstance")?t.PropertyInstance:o.PropertyInstance,r=t.hasOwnProperty("Invalidator")?t.Invalidator:o.Invalidator,e=t.hasOwnProperty("Collection")?t.Collection:o.Collection,(n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,i),e.prototype.init=function(){var n;return e.__super__.init.call(this),this.property.options.hasOwnProperty("default")?this.default=this.property.options.default:this.default=this.value=!0,this.members=new e.Members(this.property.options.members),this.members.changed=(n=this,function(t){return n.invalidate()}),this.join="function"==typeof this.property.options.composed?this.property.options.composed:!1===this.property.options.default?e.joinFunctions.or:e.joinFunctions.and},e.prototype.calcul=function(){var i;return this.invalidator||(this.invalidator=new r(this,this.obj)),this.invalidator.recycle((i=this,function(t,n){return i.value=i.members.reduce(function(t,n){var e;return e="function"==typeof n?n(i.invalidator):n,i.join(t,e)},i.default),n(),t.isEmpty()?i.invalidator=null:t.bind()})),this.revalidated(),this.value},e.bind=function(t,n){return i.bind(t,n),Object.defineProperty(t,n.name+"Members",{configurable:!0,get:function(){return n.getInstance(this).members}})},e.joinFunctions={and:function(t,n){return t&&n},or:function(t,n){return t||n}},e}()).Members=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return h(n,e),n.prototype.addPropertyRef=function(n,e){var t;if(-1===this.findRefIndex(n,e))return(t=function(t){return t.prop(n,e)}).ref={name:n,obj:e},this.push(t)},n.prototype.addValueRef=function(n,t,e){var i;if(-1===this.findRefIndex(t,e))return(i=function(t){return n}).ref={name:t,obj:e},this.push(i)},n.prototype.addFunctionRef=function(t,n,e){if(-1===this.findRefIndex(n,e))return t.ref={name:n,obj:e},this.push(t)},n.prototype.findRefIndex=function(n,e){return this._array.findIndex(function(t){return null!=t.ref&&t.ref.obj===e&&t.ref.name===n})},n.prototype.removeRef=function(t,n){var e,i;if(-1!==(e=this.findRefIndex(t,n)))return i=this.toArray(),this._array.splice(e,1),this.changed(i)},n}(),n},o.ComposedProperty=a(),o.ComposedProperty.definition=a,u=function(t){var n,e,i;return null==t&&(t={}),i=t.hasOwnProperty("PropertyInstance")?t.PropertyInstance:o.PropertyInstance,n=t.hasOwnProperty("CollectionProperty")?t.CollectionProperty:o.CollectionProperty,e=t.hasOwnProperty("ComposedProperty")?t.ComposedProperty:o.ComposedProperty,function(){function o(t,n){this.name=t,this.options=null!=n?n:{}}return o.prototype.bind=function(t){var n;return this,"function"==typeof t.getProperty&&t.getProperty(this.name)===this||("function"==typeof t.getProperty&&null!=(n=t.getProperty(this.name))&&this.override(n),this.getInstanceType().bind(t,this),t._properties=(t._properties||[]).concat([this]),null!=n&&(t._properties=t._properties.filter(function(t){return t!==n})),this.checkFunctions(t),this.checkAfterAddListener(t)),this},o.prototype.override=function(t){var n,e,i,r;if(null==this.options.parent){for(n in this.options.parent=t.options,i=[],e=t.options)r=e[n],"function"==typeof this.options[n]&&"function"==typeof r?i.push(this.options[n].overrided=r):void 0===this.options[n]?i.push(this.options[n]=r):i.push(void 0);return i}},o.prototype.checkFunctions=function(t){var n,e,i,r;for(e in this.checkAfterAddListener(t),r=[],i=o.fn)n=i[e],void 0===t[e]?r.push(t[e]=n):r.push(void 0);return r},o.prototype.checkAfterAddListener=function(t){var n;if("function"==typeof t.addListener&&void 0===t.afterAddListener&&void 0===t.addListener.overrided)return t.afterAddListener=o.optionalFn.afterAddListener,n=t.addListener,t.addListener=function(t,n){return this.addListener.overrided.call(this,t,n),this.afterAddListener(t)},t.addListener.overrided=n},o.prototype.getInstanceVarName=function(){return this.options.instanceVarName||"_"+this.name},o.prototype.isInstantiated=function(t){return null!=t[this.getInstanceVarName()]},o.prototype.getInstance=function(t){var n,e;return e=this.getInstanceVarName(),this.isInstantiated(t)||(n=this.getInstanceType(),t[e]=new n(this,t)),t[e]},o.prototype.getInstanceType=function(){return null!=this.options.composed?e:null!=this.options.collection?n:i},o.prototype.getChangeEventName=function(){return this.options.changeEventName||this.name+"Changed"},o.prototype.getUpdateEventName=function(){return this.options.changeEventName||this.name+"Updated"},o.prototype.getInvalidateEventName=function(){return this.options.changeEventName||this.name+"Invalidated"},o.fn={getProperty:function(n){return this._properties&&this._properties.find(function(t){return t.name===n})},getPropertyInstance:function(t){var n;if(n=this.getProperty(t))return n.getInstance(this)},getProperties:function(){return this._properties.slice()},getPropertyInstances:function(){return this._properties.map((n=this,function(t){return t.getInstance(n)}));var n},getInstantiatedProperties:function(){return this._properties.filter((e=this,function(t){return t.isInstantiated(e)})).map((n=this,function(t){return t.getInstance(n)}));var n,e},getManualDataProperties:function(){return this._properties.reduce((i=this,function(t,n){var e;return n.isInstantiated(i)&&(e=n.getInstance(i)).calculated&&e.manual&&(t[n.name]=e.value),t}),{});var i},setProperties:function(t,n){var e,i,r;for(e in null==n&&(n={}),t)r=t[e],null!=n.whitelist&&-1===n.whitelist.indexOf(e)||null!=n.blacklist&&-1!==n.blacklist.indexOf(e)||null!=(i=this.getPropertyInstance(e))&&i.set(r);return this},destroyProperties:function(){return this.getInstantiatedProperties().forEach(function(t){return t.destroy()}),this._properties=[],!0}},o.optionalFn={afterAddListener:function(n){return this._properties.forEach((e=this,function(t){if(t.getChangeEventName()===n)return t.getInstance(e).get()}));var e}},o}()},o.Property=u(),o.Property.definition=u,p=function(t){var e;return null==t&&(t={}),e=t.hasOwnProperty("Property")?t.Property:o.Property,function(){function r(){}return r.elementKeywords=["extended","included","constructor"],r.prototype.tap=function(t){var n;return n=Array.prototype.slice.call(arguments),"function"==typeof t?t.apply(this,n.slice(1)):this[t].apply(this,n.slice(1)),this},r.prototype.callback=function(n){return null==this._callbacks&&(this._callbacks={}),null!=this._callbacks[n]?this._callbacks[n]:this._callbacks[n]=(e=this,function(){var t;return t=1<=arguments.length?l.call(arguments,0):[],e[n].apply(e,t),null});var e},r.extend=function(t){var n,e,i;for(n in t)i=t[n],f.call(r.elementKeywords,n)<0&&(this[n]=i);return null!=t.prototype&&this.include(t.prototype),null!=(e=t.extended)&&e.apply(this),this},r.getIncludableProperties=function(t){var e,i;for(e=r.elementKeywords,null!=t._properties&&(e=e.concat(t._properties.map(function(t){return t.name}))).push("_properties"),i=[];i=i.concat(Object.getOwnPropertyNames(t).filter(function(n){return function(t){return!n.prototype.hasOwnProperty(t)&&"__"!==t.substr(0,2)&&f.call(e,t)<0&&f.call(i,t)<0}}(this))),(t=Object.getPrototypeOf(t))&&t!==Object&&t!==r.prototype;);return i},r.include=function(t){var n,e,i,r,o,s,a,u,p;for(n=0,r=(a=this.getIncludableProperties(t)).length;n<r;n++)i=a[n],this.prototype[i]=t[i];if(null!=t._properties)for(e=0,o=(u=t._properties).length;e<o;e++)s=u[e],this.property(s.name,Object.assign({},s.options));return null!=(p=t.included)&&p.apply(this),this},r.property=function(t,n){return new e(t,n).bind(this.prototype)},r.properties=function(t){var n,e,i;for(e in i=[],t)n=t[e],i.push(this.property(e,n));return i},r}()},o.Element=p(),o.Element.definition=p,c=function(t){var e,n;return null==t&&(t={}),e=t.hasOwnProperty("Binder")?t.Binder:o.Binder,(n=function(){function t(){this.callbacks=[],this.next=[],this.updating=!1}return t.prototype.update=function(){for(this.updating=!0,this.next=this.callbacks.slice();0<this.callbacks.length;)this.callbacks.shift()();return this.callbacks=this.next,this.updating=!1,this},t.prototype.addCallback=function(t){if(this.callbacks.includes(t)||this.callbacks.push(t),this.updating&&!this.next.includes(t))return this.next.push(t)},t.prototype.nextTick=function(t){return this.updating?this.next.includes(t)?void 0:this.next.push(t):this.addCallback(t)},t.prototype.removeCallback=function(t){var n;if(-1!==(n=this.callbacks.indexOf(t))&&this.callbacks.splice(n,1),-1!==(n=this.next.indexOf(t)))return this.next.splice(n,1)},t.prototype.getBinder=function(){return new t.Binder(this)},t.prototype.destroy=function(){return this.callbacks=[],this.next=[]},t}()).Binder=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return h(n,e),n.prototype.doBind=function(){return this.target.addCallback(this.callback)},n.prototype.doUnbind=function(){return this.target.removeCallback(this.callback)},n}(),n},o.Updater=c(),o.Updater.definition=c}).call(this);